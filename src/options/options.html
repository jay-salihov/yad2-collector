<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Yad2 Collector Settings</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>Settings</h1>
    </header>
    <nav class="tab-bar">
      <button class="tab-btn active" data-tab="vehicles">Vehicle Collection Logic</button>
      <button class="tab-btn" data-tab="realestate">Real Estate Collection Logic</button>
      <button class="tab-btn" data-tab="data">Data Management</button>
    </nav>
    <main>
      <div class="tab-panel active" id="tab-vehicles">
        <section class="rule-section">
          <h2>Scanning Logic</h2>
          <p class="rule-subtext">Only listings matching these conditions will be scanned</p>
          <div class="rule-groups" id="vehicle-scan-groups"></div>
          <button class="add-group-btn" data-target="vehicle-scan-groups">+</button>
          <p class="rule-status"><span id="vehicle-scan-total">--</span> listings &middot; 0 ignored by these conditions</p>
        </section>
        <section class="rule-section">
          <h2>Export Logic</h2>
          <p class="rule-subtext">Only listings matching these conditions will be exported</p>
          <div class="rule-groups" id="vehicle-export-groups"></div>
          <button class="add-group-btn" data-target="vehicle-export-groups">+</button>
          <p class="rule-status">0 / <span id="vehicle-export-total">--</span> listings matching these conditions</p>
        </section>
      </div>

      <div class="tab-panel" id="tab-realestate">
        <section class="rule-section">
          <h2>Scanning Logic</h2>
          <p class="rule-subtext">Only listings matching these conditions will be scanned</p>
          <div class="rule-groups" id="realestate-scan-groups"></div>
          <button class="add-group-btn" data-target="realestate-scan-groups">+</button>
          <p class="rule-status"><span id="realestate-scan-total">--</span> listings &middot; 0 ignored by these conditions</p>
        </section>
        <section class="rule-section">
          <h2>Export Logic</h2>
          <p class="rule-subtext">Only listings matching these conditions will be exported</p>
          <div class="rule-groups" id="realestate-export-groups"></div>
          <button class="add-group-btn" data-target="realestate-export-groups">+</button>
          <p class="rule-status">0 / <span id="realestate-export-total">--</span> listings matching these conditions</p>
        </section>
      </div>

      <div class="tab-panel" id="tab-data">
        <section class="data-management">
          <h2>Data Management</h2>
          <div class="stats-summary">
            <div class="stats-grid">
              <span>Vehicles:</span><span id="stats-vehicles">--</span>
              <span>Real Estate:</span><span id="stats-realestate">--</span>
              <span>Total listings:</span><span id="stats-total">--</span>
              <span>Price changes:</span><span id="stats-price-changes">--</span>
            </div>
          </div>
          <button id="clear-db-btn" class="danger-btn">Clear All Data</button>
        </section>
      </div>
    </main>
  </div>

  <dialog id="confirm-dialog">
    <div class="dialog-content">
      <h3>Clear all data?</h3>
      <p>
        This will permanently delete
        <strong><span id="dialog-total">0</span> listings</strong>,
        all price history, and collection logs. This cannot be undone.
      </p>
      <p class="dialog-hint">You can export your data before clearing.</p>
      <div class="dialog-actions">
        <button id="dialog-export" class="export-btn">Export Data First</button>
        <button id="dialog-confirm" class="danger-btn">Clear</button>
        <button id="dialog-cancel">Cancel</button>
      </div>
    </div>
  </dialog>

  <template id="condition-row-template">
    <div class="condition-row">
      <select class="field-select"></select>
      <select class="operator-select"></select>
      <input class="value-input" type="text" placeholder="Value">
      <button class="remove-row-btn">&times;</button>
    </div>
  </template>

  <script src="options.js"></script>
</body>
</html>
